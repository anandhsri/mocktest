<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="CBSE 10th Grade Mock Test Portal - Comprehensive practice tests with detailed analytics">
    <meta name="theme-color" content="#667eea">
    <title>CBSE Mock Test Portal - 10th Grade</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <!-- Login Screen -->
        <div id="login-screen" class="screen active">
            <div class="login-content login-centered">
                <div class="login-content-header">
                    <h1>CBSE Mock Test Portal</h1>
                    <h2>10th Grade Test System</h2>
                </div>
                <div class="login-options">
                    <div class="login-card" id="student-login-card">
                        <div class="login-icon">üë§</div>
                        <h3>Student Login</h3>
                        <p>Take mock tests and view your results</p>
                        <button id="student-login-btn" class="btn-primary" onclick="if(window.app && window.app.loginAsStudent) { window.app.loginAsStudent(); } else { const ls = document.getElementById('login-screen'); const ss = document.getElementById('subject-selection-screen'); if(ls) { ls.style.display='none'; } if(ss) { ss.style.display='block'; } } return false;">Login as Student</button>
                    </div>
                    <div class="login-card" id="admin-login-card">
                        <div class="login-icon">üîê</div>
                        <h3>Admin Login</h3>
                        <p>Review all test results and analytics</p>
                        <button id="admin-login-btn" class="btn-primary">Login as Admin</button>
                    </div>
                </div>
                <div id="admin-password-section" class="admin-password-section" style="display: none;">
                    <input type="password" id="admin-password" placeholder="Enter Admin Password" class="password-input">
                    <button id="admin-submit-btn" class="btn-primary">Submit</button>
                    <button id="cancel-admin-login-btn" class="btn-secondary">Cancel</button>
                    <p id="admin-error" class="error-message" style="display: none;"></p>
                </div>
                <div class="about-portal-section">
                    <h3>About the Portal</h3>
                    <p>Welcome to the CBSE 10th Grade Mock Test Portal. This platform provides comprehensive practice tests based on the CBSE curriculum.</p>
                    <ul>
                        <li>Multiple subjects available</li>
                        <li>Real exam-like experience</li>
                        <li>Detailed performance analysis</li>
                        <li>Chapter-wise breakdown</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Subject Selection Screen -->
        <div id="subject-selection-screen" class="screen" style="display: none;">
            <div class="subject-selection-content split-layout">
                <div class="split-main">
                    <div class="subject-selection-header">
                        <h1>Choose Your Subject</h1>
                        <h2>10th Grade CBSE Mock Test</h2>
                    </div>
                    <div class="candidate-info">
                        <div class="candidate-details">
                            <p><strong>Candidate Name:</strong> Siddesh Anand</p>
                            <p><strong>School:</strong> JGRVK</p>
                            <p><strong>Grade:</strong> 10th Grade</p>
                        </div>
                    </div>
                    <div class="subject-grid">
                        <div class="subject-card" data-subject="Mathematics">
                            <div class="subject-icon">
                                <svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                                    <circle cx="50" cy="50" r="45" fill="rgba(255,255,255,0.2)"/>
                                    <path d="M30 50 L50 30 L70 50 L50 70 Z" fill="white" opacity="0.9"/>
                                    <text x="50" y="65" font-size="20" fill="white" text-anchor="middle" font-weight="bold">œÄ</text>
                                </svg>
                            </div>
                            <h3>Mathematics</h3>
                            <p class="subject-description">50 Questions | 60 Minutes</p>
                            <p class="subject-years">Years: 2020-2025</p>
                        </div>
                        <div class="subject-card" data-subject="Physics">
                            <div class="subject-icon">
                                <svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                                    <circle cx="50" cy="50" r="45" fill="rgba(255,255,255,0.2)"/>
                                    <circle cx="35" cy="35" r="8" fill="white" opacity="0.9"/>
                                    <circle cx="65" cy="35" r="8" fill="white" opacity="0.9"/>
                                    <circle cx="50" cy="65" r="8" fill="white" opacity="0.9"/>
                                    <path d="M35 35 L50 65 M65 35 L50 65" stroke="white" stroke-width="2" opacity="0.9"/>
                                </svg>
                            </div>
                            <h3>Physics</h3>
                            <p class="subject-description">50 Questions | 60 Minutes</p>
                            <p class="subject-years">Years: 2020-2025</p>
                        </div>
                        <div class="subject-card" data-subject="Chemistry">
                            <div class="subject-icon">
                                <svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                                    <circle cx="50" cy="50" r="45" fill="rgba(255,255,255,0.2)"/>
                                    <rect x="35" y="30" width="30" height="40" rx="5" fill="white" opacity="0.9"/>
                                    <rect x="40" y="35" width="20" height="30" fill="rgba(255,255,255,0.5)"/>
                                    <circle cx="50" cy="50" r="5" fill="white" opacity="0.9"/>
                                    <path d="M50 50 L50 70" stroke="white" stroke-width="2" opacity="0.9"/>
                                </svg>
                            </div>
                            <h3>Chemistry</h3>
                            <p class="subject-description">50 Questions | 60 Minutes</p>
                            <p class="subject-years">Years: 2020-2025</p>
                        </div>
                        <div class="subject-card" data-subject="Biology">
                            <div class="subject-icon">
                                <svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                                    <circle cx="50" cy="50" r="45" fill="rgba(255,255,255,0.2)"/>
                                    <ellipse cx="50" cy="50" rx="25" ry="35" fill="white" opacity="0.9"/>
                                    <ellipse cx="50" cy="45" rx="20" ry="25" fill="rgba(255,255,255,0.3)"/>
                                    <circle cx="45" cy="40" r="3" fill="white" opacity="0.9"/>
                                    <circle cx="55" cy="40" r="3" fill="white" opacity="0.9"/>
                                    <path d="M40 55 Q50 60 60 55" stroke="white" stroke-width="2" fill="none" opacity="0.9"/>
                                </svg>
                            </div>
                            <h3>Biology</h3>
                            <p class="subject-description">50 Questions | 60 Minutes</p>
                            <p class="subject-years">Years: 2020-2025</p>
                        </div>
                        <div class="subject-card" data-subject="Social Science">
                            <div class="subject-icon">
                                <svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                                    <circle cx="50" cy="50" r="45" fill="rgba(255,255,255,0.2)"/>
                                    <rect x="30" y="35" width="40" height="30" rx="3" fill="white" opacity="0.9"/>
                                    <rect x="35" y="40" width="30" height="20" fill="rgba(255,255,255,0.3)"/>
                                    <line x1="40" y1="50" x2="60" y2="50" stroke="white" stroke-width="2" opacity="0.9"/>
                                    <line x1="50" y1="45" x2="50" y2="55" stroke="white" stroke-width="2" opacity="0.9"/>
                                    <circle cx="50" cy="75" r="8" fill="white" opacity="0.9"/>
                                </svg>
                            </div>
                            <h3>Social Science</h3>
                            <p class="subject-description">50 Questions | 60 Minutes</p>
                            <p class="subject-years">Years: 2020-2025</p>
                        </div>
                    </div>
                    <div class="subject-actions">
                        <button class="logout-btn btn-secondary">Logout</button>
                    </div>
                </div>
                <div class="split-sidebar">
                    <div class="split-sidebar-card">
                        <h3>Test Information</h3>
                        <p>Select a subject to begin your mock test. Each test contains 50 questions with a 60-minute time limit.</p>
                        <ul>
                            <li>Questions from CBSE papers</li>
                            <li>Real exam format</li>
                            <li>Instant results</li>
                            <li>Performance analytics</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <!-- Welcome Screen -->
        <div id="welcome-screen" class="screen" style="display: none;">
            <div class="welcome-content split-layout">
                <div class="split-main">
                    <div class="welcome-header">
                        <h1 id="welcome-title">Select a Subject</h1>
                        <h2 id="welcome-subtitle">10th Grade CBSE - Tough Questions</h2>
                        <div id="selected-subject-badge" class="selected-subject-badge" style="display: none;">
                            <span id="selected-subject-name">Mathematics</span>
                        </div>
                    </div>
                    <div class="candidate-info">
                        <div class="candidate-details">
                            <p><strong>Candidate Name:</strong> Siddesh Anand</p>
                            <p><strong>School:</strong> JGRVK</p>
                            <p><strong>Grade:</strong> 10th Grade</p>
                        </div>
                    </div>
                    <div class="test-info">
                        <div class="info-card">
                            <h3>Test Details</h3>
                            <ul>
                                <li><strong>Total Questions:</strong> 50</li>
                                <li><strong>Duration:</strong> 60 minutes (1 hour)</li>
                                <li><strong>Mathematics:</strong> 50 questions (100%)</li>
                                <li><strong>Question Source:</strong> Years 2020-2025</li>
                                <li><strong>Difficulty:</strong> Tough</li>
                                <li><strong>Marking:</strong> +4 for correct, -1 for incorrect</li>
                            </ul>
                        </div>
                        <div class="instructions-card">
                            <h3>Instructions</h3>
                            <ul>
                                <li>Read each question carefully before answering</li>
                                <li>You can navigate between questions using Previous/Next buttons</li>
                                <li>You can mark questions for review</li>
                                <li>Submit your test when you're ready</li>
                                <li>Timer will be displayed at the top</li>
                            </ul>
                        </div>
                        <div class="proctoring-notice">
                            <h3>‚ö†Ô∏è Proctoring Rules</h3>
                            <ul>
                                <li><strong>Fullscreen Mode:</strong> Test must be taken in fullscreen mode</li>
                                <li><strong>No Tab Switching:</strong> Switching tabs/windows is not allowed</li>
                                <li><strong>No Copy/Paste:</strong> Copying or pasting is disabled</li>
                                <li><strong>No Right-Click:</strong> Right-click menu is disabled</li>
                                <li><strong>No Developer Tools:</strong> Opening developer tools is not allowed</li>
                                <li><strong>Violation Limit:</strong> Maximum 3 violations allowed. Exceeding will auto-submit test</li>
                            </ul>
                        </div>
                    </div>
                    <div class="welcome-actions">
                        <button id="change-subject-btn" class="btn-secondary">Change Subject</button>
                        <button id="start-test-btn" class="btn-primary">Start Test</button>
                        <button id="view-last-results-btn" class="btn-secondary">View Last Test Results</button>
                    </div>
                </div>
                <div class="split-sidebar">
                    <div class="split-sidebar-card">
                        <h3>Quick Tips</h3>
                        <ul>
                            <li>Read questions carefully</li>
                            <li>Manage time wisely</li>
                            <li>Mark difficult questions for review</li>
                            <li>Double-check before submitting</li>
                        </ul>
                    </div>
                    <div class="split-sidebar-card">
                        <h3>Proctoring Rules</h3>
                        <ul style="font-size: 0.9em;">
                            <li>Fullscreen mode required</li>
                            <li>No tab switching</li>
                            <li>No copy/paste</li>
                            <li>Max 3 violations</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <!-- Test Screen -->
        <div id="test-screen" class="screen" style="display: none;">
            <div class="test-header">
                <div class="test-header-left">
                    <div class="subject-icon-test" id="subject-icon-test"></div>
                    <div class="candidate-header">
                        <span class="candidate-name">Siddesh Anand</span>
                        <span class="candidate-school">JGRVK - 10th Grade</span>
                    </div>
                </div>
                <div class="timer-section">
                    <span class="timer-label">Time Remaining:</span>
                    <span id="timer" class="timer">60:00</span>
                </div>
                <div class="question-counter">
                    <span id="question-number">1</span> / <span id="total-questions">100</span>
                </div>
                <div class="proctor-status">
                    <span id="proctor-warning" class="proctor-warning" style="display: none;"></span>
                    <span id="violation-count" class="violation-count" style="display: none;">Violations: 0</span>
                </div>
                <div class="exit-test-section">
                    <button id="exit-test-btn" class="exit-test-btn" title="Exit Test">‚úï</button>
                </div>
            </div>
            
            <!-- Proctor Warning Modal -->
            <div id="proctor-warning-modal" class="proctor-modal" style="display: none;">
                <div class="proctor-modal-content">
                    <h2>‚ö†Ô∏è Proctoring Warning</h2>
                    <p id="proctor-warning-message"></p>
                    <div class="proctor-violation-info">
                        <p><strong>Violations:</strong> <span id="modal-violation-count">0</span> / <span id="max-violations">3</span></p>
                        <p class="warning-text">Repeated violations will result in automatic test submission.</p>
                    </div>
                    <button id="acknowledge-warning-btn" class="btn-primary">I Understand</button>
                </div>
            </div>

            <div class="test-body">
                <div class="question-panel">
                    <div class="question-header">
                        <span class="subject-badge" id="subject-badge">Physics</span>
                        <span class="complexity-badge medium" id="complexity-badge">Medium</span>
                        <span class="year-badge" id="year-badge">2023</span>
                        <span class="marks-badge">4 Marks</span>
                    </div>
                    <div class="question-meta-info" id="question-meta-info" style="display: none;">
                        <div class="chapter-info">
                            <span class="meta-label">Chapter:</span>
                            <span class="chapter-name" id="chapter-name">-</span>
                        </div>
                        <div class="source-info">
                            <span class="meta-label">Source:</span>
                            <a href="#" target="_blank" rel="noopener noreferrer" class="source-link" id="source-link" style="display: none;">View Question Paper</a>
                            <span class="source-text" id="source-text" style="display: none;"></span>
                        </div>
                    </div>
                    <div class="question-text" id="question-text">
                        Question will appear here
                    </div>
                    <div class="question-diagram" id="question-diagram"></div>
                    <div class="options" id="options">
                        <!-- Options will be dynamically generated -->
                    </div>
                    <div class="descriptive-answer-section" id="descriptive-answer-section" style="display: none;">
                        <label for="descriptive-answer" style="font-weight: bold; display: block; margin-bottom: 10px; color: #333;">
                            Your Answer:
                        </label>
                        <textarea 
                            id="descriptive-answer" 
                            class="descriptive-textarea" 
                            placeholder="Write your detailed answer here. Include diagrams, calculations, and explanations..."
                            rows="10"
                        ></textarea>
                        <div class="expected-points" id="expected-points" style="display: none;">
                            <h4 style="color: #2e7d32; margin-top: 15px; margin-bottom: 10px;">Expected Answer Points (for reference):</h4>
                            <ul id="expected-points-list"></ul>
                        </div>
                    </div>
                    <div class="question-actions">
                        <div class="action-buttons">
                            <button id="mark-review-btn" class="btn-secondary">Mark for Review</button>
                            <button id="clear-answer-btn" class="btn-secondary">Clear Answer</button>
                        </div>
                        <div class="nav-buttons">
                            <button id="prev-btn" class="btn-nav">Previous</button>
                            <button id="next-btn" class="btn-nav">Next</button>
                        </div>
                    </div>
                </div>

                <div class="sidebar">
                    <div class="question-palette">
                        <h3>Question Palette</h3>
                        <div class="legend">
                            <div class="legend-item">
                                <span class="legend-box answered"></span>
                                <span>Answered</span>
                            </div>
                            <div class="legend-item">
                                <span class="legend-box marked"></span>
                                <span>Marked</span>
                            </div>
                            <div class="legend-item">
                                <span class="legend-box not-answered"></span>
                                <span>Not Answered</span>
                            </div>
                        </div>
                        <div class="subject-section">
                            <h4>Mathematics (50)</h4>
                            <div id="mathematics-questions" class="question-grid"></div>
                        </div>
                    </div>
                    <button id="submit-test-btn" class="btn-submit">Submit Test</button>
                </div>
            </div>
        </div>

        <!-- Test History Screen -->
        <div id="test-history-screen" class="screen" style="display: none;">
            <div class="history-content split-layout">
                <div class="split-main">
                    <h1>Test History</h1>
                    <div class="history-header">
                        <button id="back-to-welcome-btn" class="btn-secondary">‚Üê Back to Home</button>
                        <button id="clear-all-results-btn" class="btn-danger">Clear All Results</button>
                    </div>
                    <div id="test-history-list" class="test-history-list">
                        <!-- Test results will be displayed here -->
                    </div>
                </div>
                <div class="split-sidebar">
                    <div class="split-sidebar-card">
                        <h3>History Info</h3>
                        <p>View all your previous test attempts and track your progress over time.</p>
                    </div>
                    <div class="split-sidebar-card">
                        <h3>Actions</h3>
                        <button id="back-to-welcome-btn-sidebar" class="btn-secondary" style="width: 100%; margin-bottom: 10px;">‚Üê Back to Home</button>
                        <button id="clear-all-results-btn-sidebar" class="btn-danger" style="width: 100%;">Clear All Results</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Results Screen -->
        <div id="results-screen" class="screen" style="display: none;">
            <!-- Celebration Overlay -->
            <div id="celebration-overlay" class="celebration-overlay" style="display: none;">
                <div class="celebration-content">
                    <h1 class="celebration-title">üéâ Outstanding Performance! üéâ</h1>
                    <h2 class="celebration-subtitle">You scored above 95%!</h2>
                    <div class="celebration-message">Congratulations on this exceptional achievement!</div>
                    <button id="close-celebration-btn" class="btn-primary">Continue</button>
                </div>
                <div id="sparkler-container" class="sparkler-container"></div>
            </div>
            <div class="results-content split-layout">
                <div class="split-main">
                    <div class="candidate-info-results">
                        <p><strong>Candidate:</strong> Siddesh Anand | <strong>School:</strong> JGRVK | <strong>Grade:</strong> 10th Grade</p>
                    </div>
                    <h1>Test Results</h1>
                    <div id="test-status-badge" class="test-status-badge" style="display: none;"></div>
                    <div class="score-card">
                        <div class="score-item">
                            <h3>Total Score</h3>
                            <div class="score-value" id="total-score">0</div>
                            <div class="score-max">out of 200</div>
                        </div>
                        <div class="score-item">
                            <h3>Correct Answers</h3>
                            <div class="score-value" id="correct-count">0</div>
                        </div>
                        <div class="score-item">
                            <h3>Incorrect Answers</h3>
                            <div class="score-value incorrect" id="incorrect-count">0</div>
                        </div>
                        <div class="score-item">
                            <h3>Unanswered</h3>
                            <div class="score-value" id="unanswered-count">0</div>
                        </div>
                    </div>
                    <div class="subject-scores">
                        <div class="subject-score-card">
                            <h3 id="result-subject-name">Mathematics</h3>
                            <div class="subject-score" id="mathematics-score">0/200</div>
                        </div>
                    </div>
                    <div id="results-analysis" class="results-analysis"></div>
                    <div id="chapter-performance" class="chapter-performance-section"></div>
                    <div id="answer-review" class="answer-review-section"></div>
                    <div id="descriptive-correction" class="descriptive-correction-section" style="display: none;">
                        <h2>Answer Correction & Evaluation</h2>
                        <p class="correction-instructions">Please review each answer and assign marks. Click "Calculate Score" to update the results.</p>
                        <div id="correction-questions-list"></div>
                        <div class="correction-actions">
                            <button id="calculate-score-btn" class="btn-primary">Calculate Score</button>
                            <button id="save-correction-btn" class="btn-secondary">Save Correction</button>
                        </div>
                    </div>
                    <div class="results-actions">
                        <button id="download-pdf-btn" class="btn-primary">Download PDF</button>
                        <button id="review-answers-btn" class="btn-primary">Review Answers</button>
                        <button id="restart-test-btn" class="btn-secondary">Take Another Test</button>
                    </div>
                </div>
                <div class="split-sidebar">
                    <div class="split-sidebar-card">
                        <h3>Quick Actions</h3>
                        <button id="download-pdf-btn-sidebar" class="btn-primary" style="width: 100%; margin-bottom: 10px;">Download PDF</button>
                        <button id="review-answers-btn-sidebar" class="btn-primary" style="width: 100%; margin-bottom: 10px;">Review Answers</button>
                        <button id="restart-test-btn-sidebar" class="btn-secondary" style="width: 100%;">Take Another Test</button>
                    </div>
                    <div class="split-sidebar-card">
                        <h3>Performance Tips</h3>
                        <ul style="font-size: 0.9em;">
                            <li>Review incorrect answers</li>
                            <li>Focus on weak chapters</li>
                            <li>Practice more questions</li>
                            <li>Track your progress</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- External Scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
    <script>
        // Configure PDF.js worker
        if (typeof pdfjsLib !== 'undefined') {
            pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js';
        }
    </script>
    <script src="https://cdn.jsdelivr.net/npm/tesseract.js@5.0.4/dist/tesseract.min.js"></script>
    <script src="questions.js"></script>
    <script src="mathematics_40marks.js"></script>
    <script src="app.js"></script>
</body>
</html>
